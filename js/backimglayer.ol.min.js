!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t){t.exports=JSON.parse('{"url":{"name":"backimglayer","separator":"*!"},"constructor":"M.plugin.BackImgLayer","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","position":0,"possibleValues":["TL","TR","BR","BL"]},{"type":"boolean","name":"collapsible","position":1},{"type":"boolean","name":"collapsed","position":2},{"type":"boolean","name":"layerVisibility","position":3},{"type":"number","name":"layerId","position":4},{"type":"number","name":"columnsNumber","position":5},{"type":"simple","name":"ids","position":6},{"type":"simple","name":"titles","position":7},{"type":"simple","name":"previews","position":8},{"type":"simple","name":"layers","position":9}]}],"files":{"ol":{"scripts":["backimglayer.ol.min.js"],"styles":["backimglayer.ol.min.css"]}},"metadata":{"name":"backimglayer","description":"Sets background layer","text":"Shows different options for background layer as clickable images and changes background layer on click on an option.","version":"1.0.0","date":"21/07/2020","author":"Guadaltel","org":"Guadaltel","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg"}}')},function(t,e,n){
/*!
 * Draggabilly v3.0.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */
!function(e,i){t.exports?t.exports=i(e,n(6),n(7)):e.Draggabilly=i(e,e.getSize,e.Unidragger)}("undefined"!=typeof window?window:this,function(t,e,n){let i=t.jQuery;function o(t,e){this.element="string"==typeof t?document.querySelector(t):t,i&&(this.$element=i(this.element)),this.options={},this.option(e),this._create()}let r=o.prototype=Object.create(n.prototype);r.option=function(t){this.options={...this.options,...t}};const s=["relative","absolute","fixed"];r._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition={...this.position};let t=getComputedStyle(this.element);s.includes(t.position)||(this.element.style.position="relative"),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.setHandles(),this.enable()},r.setHandles=function(){let{handle:t}=this.options;"string"==typeof t?this.handles=this.element.querySelectorAll(t):"object"==typeof t&&t.length?this.handles=t:t instanceof HTMLElement?this.handles=[t]:this.handles=[this.element]};const a=["dragStart","dragMove","dragEnd"];let l=r.emitEvent;function c(t,e,n){return e?(n=n||"round",Math[n](t/e)*e):t}r.emitEvent=function(e,n){if(!this.isEnabled&&a.includes(e))return;l.call(this,e,n);let i,o=t.jQuery;if(!o||!this.$element)return;let r=n;n&&n[0]instanceof Event&&([i,...r]=n);let s=o.Event(i);s.type=e,this.$element.trigger(s,r)},r._getPosition=function(){let t=getComputedStyle(this.element),e=this._getPositionCoord(t.left,"width"),n=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(n)?0:n,this._addTransformPosition(t)},r._getPositionCoord=function(t,n){if(t.includes("%")){let i=e(this.element.parentNode);return i?parseFloat(t)/100*i[n]:0}return parseInt(t,10)},r._addTransformPosition=function(t){let e=t.transform;if(!e.startsWith("matrix"))return;let n=e.split(","),i=e.startsWith("matrix3d")?12:4,o=parseInt(n[i],10),r=parseInt(n[i+1],10);this.position.x+=o,this.position.y+=r},r.handlePointerDown=function(t,e){this.isEnabled&&(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),document.activeElement.blur(),this.bindActivePointerEvents(t),this.element.classList.add("is-pointer-down"))},r.handleDragStart=function(){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.animate())},r.measureContainment=function(){let t=this.getContainer();if(!t)return;let n=e(this.element),i=e(t),{borderLeftWidth:o,borderRightWidth:r,borderTopWidth:s,borderBottomWidth:a}=i,l=this.element.getBoundingClientRect(),c=t.getBoundingClientRect(),u=o+r,h=s+a,p=this.relativeStartPosition={x:l.left-(c.left+o),y:l.top-(c.top+s)};this.containSize={width:i.width-u-p.x-n.width,height:i.height-h-p.y-n.height}},r.getContainer=function(){let t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},r.handleDragMove=function(t,e,n){if(!this.isEnabled)return;let i=n.x,o=n.y,r=this.options.grid,s=r&&r[0],a=r&&r[1];i=c(i,s),o=c(o,a),i=this.containDrag("x",i,s),o=this.containDrag("y",o,a),i="y"==this.options.axis?0:i,o="x"==this.options.axis?0:o,this.position.x=this.startPosition.x+i,this.position.y=this.startPosition.y+o,this.dragPoint.x=i,this.dragPoint.y=o},r.containDrag=function(t,e,n){if(!this.options.containment)return e;let i="x"==t?"width":"height",o=c(-this.relativeStartPosition[t],n,"ceil"),r=this.containSize[i];return r=c(r,n,"floor"),Math.max(o,Math.min(r,e))},r.handlePointerUp=function(){this.element.classList.remove("is-pointer-down")},r.handleDragEnd=function(){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"))},r.animate=function(){this.isDragging&&(this.positionDrag(),requestAnimationFrame(()=>this.animate()))},r.setLeftTop=function(){let{x:t,y:e}=this.position;this.element.style.left=`${t}px`,this.element.style.top=`${e}px`},r.positionDrag=function(){let{x:t,y:e}=this.dragPoint;this.element.style.transform=`translate3d(${t}px, ${e}px, 0)`},r.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.setLeftTop()},r.enable=function(){this.isEnabled||(this.isEnabled=!0,this.bindHandles())},r.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.isDragging&&this.dragEnd(),this.unbindHandles())};const u=["transform","left","top","position"];return r.destroy=function(){this.disable(),u.forEach(t=>{this.element.style[t]=""}),this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},r._init=function(){},i&&i.bridget&&i.bridget("draggabilly",o),o})},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-backimglayer">\n\n    <div id="m-backimglayer-titulo">{{translations.headertitle}}</div>\n    <div id="m-backimglayer-previews">\n        {{#each layers}}\n            {{#if this.firstElement}}\n                </br>\n            {{/if}}\n\n\n            <div id="m-backimglayer-lyr-{{this.id}}" title="{{this.title}}">\n                <img src="{{this.preview}}" alt="{{this.title}}" height="100px" width="100px" />\n                <span>{{this.title}}</span>\n            </div>\n\n\n        {{/each}}\n        \x3c!-- <button class="m-backimglayer-unique-btn" id="m-backimglayer-unique-btn" title="SelecciÃ³n de capa de fondo"></button> --\x3e\n    </div>\n</div>'},function(t){t.exports=JSON.parse('{"tooltip":"Background layers"}')},function(t){t.exports=JSON.parse('{"tooltip":"Capas de fondo"}')},function(t,e,n){},function(t,e,n){
/*!
 * Infinite Scroll v2.0.4
 * measure size of elements
 * MIT license
 */
!function(e,n){t.exports?t.exports=n():e.getSize=n()}(window,function(){function t(t){let e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}let e=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];e.length;return function(n){if("string"==typeof n&&(n=document.querySelector(n)),!(n&&"object"==typeof n&&n.nodeType))return;let i=getComputedStyle(n);if("none"==i.display)return function(){let t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return e.forEach(e=>{t[e]=0}),t}();let o={};o.width=n.offsetWidth,o.height=n.offsetHeight;let r=o.isBorderBox="border-box"==i.boxSizing;e.forEach(t=>{let e=i[t],n=parseFloat(e);o[t]=isNaN(n)?0:n});let s=o.paddingLeft+o.paddingRight,a=o.paddingTop+o.paddingBottom,l=o.marginLeft+o.marginRight,c=o.marginTop+o.marginBottom,u=o.borderLeftWidth+o.borderRightWidth,h=o.borderTopWidth+o.borderBottomWidth,p=t(i.width);!1!==p&&(o.width=p+(r?0:s+u));let d=t(i.height);return!1!==d&&(o.height=d+(r?0:a+h)),o.innerWidth=o.width-(s+u),o.innerHeight=o.height-(a+h),o.outerWidth=o.width+l,o.outerHeight=o.height+c,o}})},function(t,e,n){
/*!
 * Unidragger v3.0.1
 * Draggable base class
 * MIT license
 */
!function(e,i){t.exports?t.exports=i(e,n(8)):e.Unidragger=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function n(){}let i,o,r=n.prototype=Object.create(e.prototype);r.handleEvent=function(t){let e="on"+t.type;this[e]&&this[e](t)},"ontouchstart"in t?(i="touchstart",o=["touchmove","touchend","touchcancel"]):t.PointerEvent?(i="pointerdown",o=["pointermove","pointerup","pointercancel"]):(i="mousedown",o=["mousemove","mouseup"]),r.touchActionValue="none",r.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},r.unbindHandles=function(){this._bindHandles("removeEventListener","")},r._bindHandles=function(e,n){this.handles.forEach(o=>{o[e](i,this),o[e]("click",this),t.PointerEvent&&(o.style.touchAction=n)})},r.bindActivePointerEvents=function(){o.forEach(e=>{t.addEventListener(e,this)})},r.unbindActivePointerEvents=function(){o.forEach(e=>{t.removeEventListener(e,this)})},r.withPointer=function(t,e){e.pointerId===this.pointerIdentifier&&this[t](e,e)},r.withTouch=function(t,e){let n;for(let t of e.changedTouches)t.identifier===this.pointerIdentifier&&(n=t);n&&this[t](e,n)},r.onmousedown=function(t){this.pointerDown(t,t)},r.ontouchstart=function(t){this.pointerDown(t,t.changedTouches[0])},r.onpointerdown=function(t){this.pointerDown(t,t)};const s=["TEXTAREA","INPUT","SELECT","OPTION"],a=["radio","checkbox","button","submit","image","file"];return r.pointerDown=function(t,e){let n=s.includes(t.target.nodeName),i=a.includes(t.target.type),o=!n||i;!this.isPointerDown&&!t.button&&o&&(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[t,e]))},r.onmousemove=function(t){this.pointerMove(t,t)},r.onpointermove=function(t){this.withPointer("pointerMove",t)},r.ontouchmove=function(t){this.withTouch("pointerMove",t)},r.pointerMove=function(t,e){let n={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[t,e,n]),!this.isDragging&&this.hasDragStarted(n)&&this.dragStart(t,e),this.isDragging&&this.dragMove(t,e,n)},r.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},r.dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[t,e])},r.dragMove=function(t,e,n){this.emitEvent("dragMove",[t,e,n])},r.onmouseup=function(t){this.pointerUp(t,t)},r.onpointerup=function(t){this.withPointer("pointerUp",t)},r.ontouchend=function(t){this.withTouch("pointerUp",t)},r.pointerUp=function(t,e){this.pointerDone(),this.emitEvent("pointerUp",[t,e]),this.isDragging?this.dragEnd(t,e):this.staticClick(t,e)},r.dragEnd=function(t,e){this.isDragging=!1,setTimeout(()=>delete this.isPreventingClicks),this.emitEvent("dragEnd",[t,e])},r.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},r.onpointercancel=function(t){this.withPointer("pointerCancel",t)},r.ontouchcancel=function(t){this.withTouch("pointerCancel",t)},r.pointerCancel=function(t,e){this.pointerDone(),this.emitEvent("pointerCancel",[t,e])},r.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},r.staticClick=function(t,e){let n="mouseup"===t.type;n&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[t,e]),n&&(this.isIgnoringMouseUp=!0,setTimeout(()=>{delete this.isIgnoringMouseUp},400)))},n})},function(t,e,n){var i,o;i="undefined"!=typeof window?window:this,o=function(){function t(){}let e=t.prototype;return e.on=function(t,e){if(!t||!e)return this;let n=this._events=this._events||{},i=n[t]=n[t]||[];return i.includes(e)||i.push(e),this},e.once=function(t,e){if(!t||!e)return this;this.on(t,e);let n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this},e.off=function(t,e){let n=this._events&&this._events[t];if(!n||!n.length)return this;let i=n.indexOf(e);return-1!=i&&n.splice(i,1),this},e.emitEvent=function(t,e){let n=this._events&&this._events[t];if(!n||!n.length)return this;n=n.slice(0),e=e||[];let i=this._onceEvents&&this._onceEvents[t];for(let o of n)i&&i[o]&&(this.off(t,o),delete i[o]),o.apply(this,e);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t},t.exports?t.exports=o():i.EvEmitter=o()},function(t,e,n){"use strict";n.r(e);n(5);var i=n(0),o=n(1),r=n.n(o),s=n(2),a=n.n(s),l={en:n(3),es:n(4)},c=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},u=function(t){return l[t]},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c(),n=u(e),i="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(e,"' has not been defined.")):i=t.split(".").reduce(function(t,e){return t[e]},n),i};function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function e(t,n,i,o,r,s,a,l,c){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h,p=new M.impl.Control;if(u=f(this,y(e).call(this,p,"BackImgLayer")),t.getBaseLayers().forEach(function(e){e.on(M.evt.LOAD,t.removeLayers(e))}),u.layers=[],t._plugins.filter(function(e){return"backimglayer"===t._plugins[t._plugins.indexOf(e)].name}).map(function(t){return h=c}),void 0!==n){var d=n;n.filter(function(t){return 0!==n.indexOf(t)&&n.indexOf(t)%h==0}).map(function(t){var e=n.indexOf(t),i=Object.assign({},t);return i.firstElement=!0,d[e]=i,i}),u.layers=d.slice(0)}else{var m=r.split(","),g=s.split(","),v=a.split(",");l.split(",").forEach(function(t,e){var n=t.split("sumar");n=n.map(function(t){return new M.layer.WMTS(t)});var i={id:m[e],title:g[e],preview:v[e],layers:n};u.layers.push(i)})}return c>u.layers.length?u.numeroColumnas=110*u.layers.length:u.numeroColumnas=110*c,u.numeroColumnas+="px",u.flattedLayers=u.layers.reduce(function(t,e){return t.concat(e.layers)},[]),u.activeLayer=-1,u.idLayer=null===i?0:i,u.visible=null===o||o,u.draggable_=null,u}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,M.Control),n=e,(i=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise(function(t,n){var i=M.template.compileSync(a.a,{vars:{layers:e.layers,translations:{headertitle:h("tooltip")}}});e.html=i,e.listen(i),e.on(M.evt.ADDED_TO_MAP,function(){var t=e.visible;e.idLayer>-1&&(e.activeLayer=e.idLayer,e.showBaseLayer({currentTarget:{parentElement:i}},e.layers[e.activeLayer],e.activeLayer)),!1===t&&e.map.removeLayers(e.map.getBaseLayers());var n=e.getPanel();if(!M.utils.isNullOrEmpty(n)){var o=n.getTemplatePanel();o.querySelector(".backimglyr-simbolo-cuadros").addEventListener("click",function(){e.getPanel().isCollapsed()&&(o.style.removeProperty("left"),o.style.removeProperty("top")),M.window.WIDTH>=parseInt(M.config.MOBILE_WIDTH,10)&&(n.isCollapsed()?e.deactivateDraggable_():e.activateDraggable_())})}}),t(i)})}},{key:"activateDraggable_",value:function(){if(M.utils.isNullOrEmpty(this.draggable_)){var t=this.getPanel().getTemplatePanel();this.draggable_=new r.a(t,{containment:".m-mapea-container",handle:".m-container.m-backimglayer>#m-backimglayer-titulo"})}this.draggable_.enable()}},{key:"deactivateDraggable_",value:function(){document.querySelector(".m-plugin-backimglayer").style.position="relative",this.draggable_.disable()}},{key:"showBaseLayer",value:function(t,e,n){var i=this.handlerClickDesktop.bind(this);document.getElementById("m-backimglayer-previews").style.width=this.numeroColumnas,i(t,e,n)}},{key:"handlerClickDesktop",value:function(t,e,n){this.removeLayers(),this.visible=!1;var i=e.layers,o=t.currentTarget.parentElement.querySelector("#m-backimglayer-lyr-".concat(e.id)).classList.contains("activeBackimglayerDiv");i.forEach(function(t,e,n){return t.setZIndex(e-n.length)}),t.currentTarget.parentElement.querySelectorAll('div[id^="m-backimglayer-lyr-"]').forEach(function(t){t.classList.contains("activeBackimglayerDiv")&&t.classList.remove("activeBackimglayerDiv")}),o||(this.visible=!0,this.activeLayer=n,t.currentTarget.parentElement.querySelector("#m-backimglayer-lyr-".concat(e.id)).classList.add("activeBackimglayerDiv"),this.map.addLayers(i)),this.fire("backimglayer:activeChanges",[{activeLayerId:this.activeLayer}])}},{key:"removeLayers",value:function(){this.map.removeLayers(this.flattedLayers),this.map.removeLayers(this.map.getBaseLayers())}},{key:"listen",value:function(t){var e=this;t.querySelectorAll('div[id^="m-backimglayer-lyr-"]').forEach(function(t,n){return t.addEventListener("click",function(t){return e.showBaseLayer(t,e.layers[n],n)})})}},{key:"equals",value:function(t){return t instanceof e}}])&&d(n.prototype,i),o&&d(n,o),e}();function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=w(this,E(e).call(this))).map_=null,t.controls_=[],t.name="backimglayer",t.options=n,t.position_=n.position||"TR",t.layerId=n.layerId||0,t.layerVisibility=n.layerVisibility||!0,t.layerOpts=n.layerOpts||void 0,t.ids=n.ids||"",t.titles=n.titles||"",t.previews=n.previews||"",t.layers=n.layers||"",t.collapsed=void 0===n.collapsed||n.collapsed,t.collapsible=void 0===n.collapsible||n.collapsible,t.columnsNumber=null!=n.columnsNumber?n.columnsNumber:2,t.metadata_=i.metadata,t.tooltip_=n.tooltip||h("tooltip"),t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,M.Plugin),n=e,(o=[{key:"addTo",value:function(t){var e=this;this.controls_.push(new g(t,this.layerOpts,this.layerId,this.layerVisibility,this.ids,this.titles,this.previews,this.layers,this.columnsNumber)),this.map_=t,this.panel_=new M.ui.Panel("panelBackImgLayer",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position_],className:"m-plugin-backimglayer",tooltip:this.tooltip_,collapsedButtonClass:"backimglyr-simbolo-cuadros"}),this.controls_[0].on("backimglayer:activeChanges",function(t){e.layerId=t.activeLayerId}),this.panel_.addControls(this.controls_),t.addPanels(this.panel_)}},{key:"getAPIRest",value:function(){var t=void 0===this.layerOpts?"".concat(this.ids,"*!").concat(this.titles,"*!").concat(this.previews,"*!").concat(this.layers):this.turnLayerOptsIntoUrl();return"".concat(this.name,"=").concat(this.position_,"*!").concat(this.collapsible,"*!").concat(this.collapsed,"*!").concat(this.layerVisibility,"*!").concat(this.layerId,"*!").concat(this.columnsNumber,"*!").concat(t)}},{key:"turnLayerOptsIntoUrl",value:function(){var t=this,e="",n="",i="",o="";return this.layerOpts.forEach(function(r){0!==t.layerOpts.indexOf(r)&&(e+=",",n+=",",i+=",",o+=","),e+=r.id,n+=r.title,i+=r.preview,r.layers.forEach(function(t){var e=0===r.layers.indexOf(t),n=void 0===t.options.visibility||t.options.visibility;e||(o+="sumar"),o+="".concat(t.options.type),o+="*".concat(t.options.url),o+="*".concat(t.options.name),o+="*".concat(t.options.matrixSet),o+="*".concat(t.options.legend),o+="*".concat(t.options.transparent),o+="*".concat(t.options.format),o+="*".concat(t.options.displayInLayerSwitcher),o+="*".concat(t.options.queryable),o+="*".concat(n)})}),"".concat(e,"*!").concat(n,"*!").concat(i,"*!").concat(o)}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.map_=null,this.control_=null,this.controls_=null,this.panel_=null,this.name=null,this.layerOpts=null}},{key:"equals",value:function(t){return t instanceof e}},{key:"getMetadata",value:function(){return this.metadata_}}])&&b(n.prototype,o),r&&b(n,r),e}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t,e,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,S(e).apply(this,arguments))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,M.impl.Control),n=e,(i=[{key:"addTo",value:function(t,n){var i=this;t.getMapImpl().getInteractions().forEach(function(t){t instanceof ol.interaction.DoubleClickZoom&&(i.dblClickInteraction_=t)}),L(S(e.prototype),"addTo",this).call(this,t,n)}},{key:"activateClick",value:function(t){this.dblClickInteraction_.setActive(!1),t.getMapImpl().on("dblclick",function(e){var n=new CustomEvent("mapclicked",{detail:e.coordinate,bubbles:!0});t.getContainer().dispatchEvent(n)})}},{key:"deactivateClick",value:function(t){this.dblClickInteraction_.setActive(!0),t.getMapImpl().removeEventListener("dblclick")}}])&&O(n.prototype,i),o&&O(n,o),e}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.BackImgLayer=k,window.M.control.BackImgLayerControl=g,window.M.impl.control.BackImgLayerControl=T}]);
//# sourceMappingURL=backimglayer.ol.min.js.map